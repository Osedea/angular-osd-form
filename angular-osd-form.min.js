!function(){function t(){return{restrict:"A",require:["osdSubmit","?form"],scope:{osdSubmit:"&"},controller:["$rootScope","$scope",function(t,r){var e=this,o=null;e.attempted=!1,e.validators=[],r.$on("osdReset",function(){e.setAttempted(!1)}),r.$on("osdValidate",function(){e.validateForm()}),e.onInvalid=function(){t.$broadcast("osdInvalid",o)},e.addFieldValidator=function(t,r){e.validators.push({attr:t,fn:r})},e.validateFields=function(){var t=!0;return e.validators.forEach(function(r){r.fn({key:r.attr})||(o[r.attr].$error.validator=!0,t=!1)}),t},e.fieldShowsError=function(t,r){if(!e.attempted||r&&!o[t].$error[r])return!1;var i=e.validators.some(function(r){if(r.attr!==t)return!1;var e=r.fn({key:t});return o[r.attr].$error.validator=!e,!e});return i||o[t].$invalid},e.validateForm=function(){var t=e.validateFields()&&o.$valid;return o.osdValid=t,t},e.setAttempted=function(t){e.attempted=t},e.setNgFormCtrl=function(t){o=t}}],compile:function(){return{pre:function(t,r,e,o){var i=o[0],n=o[1];i.setNgFormCtrl(n),t.osd=t.osd||{},t.osd[e.name]=i},post:function(t,r,e,o){{var i=o[0];o[1]}r.bind("submit",function(){return i.setAttempted(!0),i.validateForm()?(t.osdSubmit(),void 0):(i.onInvalid(),t.$$phase||t.$apply(),!1)})}}}}}function r(){return{restrict:"E",replace:!0,transclude:!0,scope:{attr:"@"},templateUrl:"/partials/directives/forms/osd-field.html",require:"^osdSubmit",controller:["$scope",function(t){var r=this;r.getAttr=function(){return t.attr}}],link:function(t,r,e,o){t.showError=function(){return o.fieldShowsError(t.attr,t.type)}}}}function e(){return{restrict:"E",replace:!0,scope:{attr:"@",errorType:"@",msg:"@",validator:"&"},templateUrl:"/partials/directives/forms/osd-error.html",require:["^osdField","^osdSubmit"],link:function(t,r,e,o){var i=o[0],n=o[1],a=t.attr||i.getAttr(),d=t.errorType||"required";e.validator&&(n.addFieldValidator(a,t.validator),d="validator"),t.showError=function(){return n.fieldShowsError(a,d)}}}}angular.module("osdForm",[]).directive("osdError",e).directive("osdField",r).directive("osdSubmit",t)}();