!function(){function r(r,t){var o=this,e=null;o.attempted=!1,o.validators=[],t.$on("osdReset",function(){o.setAttempted(!1)}),t.$on("osdValidate",function(){o.validateForm()}),o.onInvalid=function(){r.$broadcast("osdInvalid",e)},o.addFieldValidator=function(r,t){o.validators.push({attr:r,fn:t})},o.validateFields=function(){var r=!0;return o.validators.forEach(function(t){t.fn({key:t.attr})||(e[t.attr].$error.validator=!0,r=!1)}),r},o.fieldShowsError=function(r,t){if(!o.attempted||t&&!e[r].$error[t])return!1;var i=o.validators.some(function(t){if(t.attr!==r)return!1;var o=t.fn({key:r});return e[t.attr].$error.validator=!o,!o});return i||e[r].$invalid},o.validateForm=function(){var r=o.validateFields()&&e.$valid;return e.osdValid=r,r},o.setAttempted=function(r){o.attempted=r},o.setNgFormCtrl=function(r){e=r}}function t(){return{restrict:"A",require:["osdSubmit","?form"],scope:{osdSubmit:"&"},controller:"OsdSubmitCtrl",compile:function(){return{pre:function(r,t,o,e){var i=e[0],n=e[1];i.setNgFormCtrl(n),r.osd=r.osd||{},r.osd[o.name]=i},post:function(r,t,o,e){{var i=e[0];e[1]}t.bind("submit",function(){return i.setAttempted(!0),i.validateForm()?(r.osdSubmit(),r.$apply(),void 0):(i.onInvalid(),r.$$phase||r.$apply(),!1)})}}}}}function o(){return{restrict:"E",replace:!0,transclude:!0,scope:{attr:"@"},template:'<div class="form-group" ng-class="{ \'has-error\': showError() }"><div ng-transclude></div></div>',require:"^osdSubmit",controller:["$scope",function(r){var t=this;t.getAttr=function(){return r.attr}}],link:function(r,t,o,e){r.showError=function(){return e.fieldShowsError(r.attr,r.type)}}}}function e(){return{restrict:"E",replace:!0,scope:{attr:"@",errorType:"@",msg:"@",validator:"&"},template:'<span class="help-block" ng-show="showError()">{{ msg }}</span>',require:["^osdField","^osdSubmit"],link:function(r,t,o,e){var i=e[0],n=e[1],a=r.attr||i.getAttr(),d=r.errorType||"required";o.validator&&(n.addFieldValidator(a,r.validator),d="validator"),r.showError=function(){return n.fieldShowsError(a,d)}}}}r.$inject=["$rootScope","$scope"],angular.module("osdForm",[]).controller("OsdSubmitCtrl",r).directive("osdError",e).directive("osdField",o).directive("osdSubmit",t)}();